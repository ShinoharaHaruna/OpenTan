# OpenTan

<div align="right">
<img src="./icon.jpg" width="100" align="right" />
</div>
<img src="https://img.shields.io/github/license/ShinoharaHaruna/OpenTan" />
<img src="https://img.shields.io/github/go-mod/go-version/ShinoharaHaruna/OpenTan" />

[Chinese Documentation](README_zh-CN.md)

## Description

OpenTan is a MyTan API Wrapper designed to be compatible with the OpenAI API. More specifically, it emulates the `/chat/completions` endpoint. By running OpenTan, you can use it with Cline to get an AI IDE experience at a very low cost.

> **Warning:** Using OpenTan **may** violate the terms of service of MyTan or cause harm to MyTan servers. Using OpenTan properly is normally safe, but please use it with a kind heart and do not abuse it.
>
> **Strongly discouraged:** Using high-end models from Anthropic Claude with OpenTan is **strongly discouraged**, as it could potentially cause significant harm to MyTan servers.
>
> OpenTan is not responsible for any consequences caused by using OpenTan.

## Usage

After setting up your Go environment and cloning the repository (or downloading the binary), you are ready to use OpenTan.

### Configuration

Copy the `config.template.yml` file to `config.yml`. You can configure the running host and port, and change `Mode` to `debug` for more detailed information.

The `Prefix` field is used to set the prefix for the API endpoint. The default value is `/v1`, so the API endpoint will be `http://localhost:52711/v1` by default.

`ID` and `Password` are used to keep your token fresh. These are the same credentials you use to log in to MyTan. Generally speaking, `ID` is your registered mobile number.

Logically speaking, the `API_Key` is not strictly necessary, as OpenTan will automatically generate one for you. However, you *must* keep it in your configuration file to ensure OpenTan functions correctly. So you can fill in anything to get started with OpenTan.

### Cline Integration

We assume you have a basic understanding of Go and Cline, and that you have already run OpenTan and installed Cline in VS Code.

1.  Open the Cline settings.
2.  Choose `OpenAI Compatible` as the API Provider.
3.  Set the API Endpoint, e.g., `http://localhost:52711/v1`.
4.  Type anything in `API_Key`, as OpenTan has its own API logic.
5.  Type anything in `Model ID`, as OpenTan has its own model settings. You can specify the model to use through the configuration file, and the default configuration makes OpenTan use `gemini-2.5-flash` as the default model.
6.  Now you can use Cline with OpenTan! Configure any further settings you desire within Cline.

## Models

OpenTan's best model is `gemini-2.5-flash`, which performs well when handling long prompts; if you use models like `mai-seed-pro`, you may face some problems.

Here are some recommended models:

- `gpt-4o`: Already good. No consumption.
- `gpt-4o-mini`: Can meet most needs, no consumption.
- `gpt-4.1`: Probably better. Normal 1x consumption.
- `gemini-2.5-flash`: Best practice, taking into account long context and performance. No consumption.
- `mai-seed-pro`: Based on `Deepseek-V3-0324`, the overall experience is better than `gpt-4o`. No consumption.
- `mai-seed-think`: Based on `Deepseek-R1`, it feels too heavy. In actual experience, it is not suitable for slightly complex scenes, which will lead to too long thinking time. No consumption.

## Known Issues

> Or rather, featuresï¼ˆ

OpenTan will clear the history after each request, so that the conversations generated by Cline will not affect the user's normal history on MyTan. You will see them in the *Recent Deleted* list.

---

When used with Cline, which can easily generate extremely long prompts, MytTan may not respond properly. In this case, my personal best practice is to abandon the original session and use the same task prompt for a new session.

## Contributing

We welcome contributions of any kind! If you would like to contribute to OpenTan, please feel free to open an issue or a pull request.

## License

OpenTan is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.

OpenTan has NO affiliation with MyTan or OpenAI, and holds no responsibility for any consequences resulting from the use of OpenTan.
